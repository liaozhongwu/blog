{"version":3,"sources":["blog/index.js","blog/index.jsx"],"names":["_interopRequireDefault","obj","__esModule","default","_classCallCheck","instance","Constructor","TypeError","_possibleConstructorReturn","self","call","ReferenceError","_inherits","subClass","superClass","prototype","Object","create","constructor","value","enumerable","writable","configurable","setPrototypeOf","__proto__","defineProperty","exports","_createClass","defineProperties","target","props","i","length","descriptor","key","protoProps","staticProps","_react","require","_react2","_clientAjax","_clientAjax2","Blog","_React$Component","this","_this","getPrototypeOf","state","blog","comments","comment","name","phone","email","content","commentMsg","title","description","cssFile","jsFile","_this2","_state","url","method","data","bid","_id","before","setState","success","body","push","error","complete","setTimeout","_this3","_state2","createElement","className","createTime","toString","dangerouslySetInnerHTML","__html","marked","map","placeholder","required","onChange","e","handleCommentValueChange","type","onClick","handleSubmit","Component"],"mappings":"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","file":"blog/index.js","sourcesContent":["\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _react = require(\"react\");\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _clientAjax = require(\"client-ajax\");\n\nvar _clientAjax2 = _interopRequireDefault(_clientAjax);\n\nrequire(\"../../../lib/date\");\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar Blog = function (_React$Component) {\n\t_inherits(Blog, _React$Component);\n\n\t_createClass(Blog, null, [{\n\t\tkey: \"getMeta\",\n\t\tvalue: function getMeta() {\n\t\t\treturn {\n\t\t\t\ttitle: \"廖仲武的博客 - Liaozhongwu's Blog\",\n\t\t\t\tdescription: \"廖仲武的博客 - Liaozhongwu's Blog\",\n\t\t\t\tcssFile: [\"/css/theme.css\", \"/css/highlight.css\", \"/page/blog/index.css\"],\n\t\t\t\tjsFile: [\"/page/blog/index.js\"]\n\t\t\t};\n\t\t}\n\t}]);\n\n\tfunction Blog(props) {\n\t\t_classCallCheck(this, Blog);\n\n\t\tvar _this = _possibleConstructorReturn(this, Object.getPrototypeOf(Blog).call(this));\n\n\t\t_this.state = {\n\t\t\tblog: props.blog,\n\t\t\tcomments: props.comments,\n\t\t\tcomment: {\n\t\t\t\tname: \"\",\n\t\t\t\tphone: \"\",\n\t\t\t\temail: \"\",\n\t\t\t\tcontent: \"\"\n\t\t\t},\n\t\t\tcommentMsg: \"\"\n\t\t};\n\t\treturn _this;\n\t}\n\n\t_createClass(Blog, [{\n\t\tkey: \"handleSubmit\",\n\t\tvalue: function handleSubmit() {\n\t\t\tvar _this2 = this;\n\n\t\t\tvar _state = this.state;\n\t\t\tvar blog = _state.blog;\n\t\t\tvar comments = _state.comments;\n\t\t\tvar comment = _state.comment;\n\n\n\t\t\tif (!comment.content) {\n\t\t\t\tthis.setState({\n\t\t\t\t\tcommentMsg: \"please input your content\"\n\t\t\t\t});\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (!comment.name) {\n\t\t\t\tthis.setState({\n\t\t\t\t\tcommentMsg: \"please input your name\"\n\t\t\t\t});\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t(0, _clientAjax2.default)({\n\t\t\t\turl: \"/comment/save\",\n\t\t\t\tmethod: \"post\",\n\t\t\t\tdata: {\n\t\t\t\t\tbid: blog._id,\n\t\t\t\t\tname: comment.name,\n\t\t\t\t\tphone: comment.phone,\n\t\t\t\t\temail: comment.email,\n\t\t\t\t\tcontent: comment.content\n\t\t\t\t},\n\t\t\t\tbefore: function before() {\n\t\t\t\t\t_this2.setState({\n\t\t\t\t\t\tcommentMsg: \"submiting...\"\n\t\t\t\t\t});\n\t\t\t\t},\n\t\t\t\tsuccess: function success(body) {\n\t\t\t\t\tcomments.push(body);\n\t\t\t\t\t_this2.setState({\n\t\t\t\t\t\tcomments: comments,\n\t\t\t\t\t\tcomment: {\n\t\t\t\t\t\t\tname: \"\",\n\t\t\t\t\t\t\tphone: \"\",\n\t\t\t\t\t\t\temail: \"\",\n\t\t\t\t\t\t\tcontent: \"\"\n\t\t\t\t\t\t},\n\t\t\t\t\t\tcommentMsg: \"submit success\"\n\t\t\t\t\t});\n\t\t\t\t},\n\t\t\t\terror: function error() {\n\t\t\t\t\t_this2.setState({\n\t\t\t\t\t\tcommentMsg: \"submit failure\"\n\t\t\t\t\t});\n\t\t\t\t},\n\t\t\t\tcomplete: function complete() {\n\t\t\t\t\tsetTimeout(function () {\n\t\t\t\t\t\t_this2.setState({\n\t\t\t\t\t\t\tcommentMsg: \"\"\n\t\t\t\t\t\t});\n\t\t\t\t\t}, 2000);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}, {\n\t\tkey: \"handleCommentValueChange\",\n\t\tvalue: function handleCommentValueChange(key, value) {\n\t\t\tvar comment = this.state.comment;\n\n\t\t\tcomment[key] = value;\n\t\t\tthis.setState({\n\t\t\t\tcomment: comment\n\t\t\t});\n\t\t}\n\t}, {\n\t\tkey: \"render\",\n\t\tvalue: function render() {\n\t\t\tvar _this3 = this;\n\n\t\t\tvar _state2 = this.state;\n\t\t\tvar blog = _state2.blog;\n\t\t\tvar comments = _state2.comments;\n\t\t\tvar comment = _state2.comment;\n\t\t\tvar commentMsg = _state2.commentMsg;\n\n\t\t\treturn _react2.default.createElement(\n\t\t\t\t\"div\",\n\t\t\t\t{ className: \"content\" },\n\t\t\t\t_react2.default.createElement(\n\t\t\t\t\t\"p\",\n\t\t\t\t\t{ className: \"title\" },\n\t\t\t\t\t_react2.default.createElement(\n\t\t\t\t\t\t\"span\",\n\t\t\t\t\t\t{ className: \"title-content\" },\n\t\t\t\t\t\tblog.title\n\t\t\t\t\t),\n\t\t\t\t\t_react2.default.createElement(\n\t\t\t\t\t\t\"span\",\n\t\t\t\t\t\t{ className: \"time\" },\n\t\t\t\t\t\tblog.createTime.toString()\n\t\t\t\t\t)\n\t\t\t\t),\n\t\t\t\t_react2.default.createElement(\"article\", { className: \"article\", dangerouslySetInnerHTML: { __html: blog.marked } }),\n\t\t\t\t_react2.default.createElement(\n\t\t\t\t\t\"ul\",\n\t\t\t\t\t{ className: \"list\" },\n\t\t\t\t\tcomments.map(function (comment, i) {\n\t\t\t\t\t\treturn _react2.default.createElement(\n\t\t\t\t\t\t\t\"li\",\n\t\t\t\t\t\t\t{ className: \"item comment\", key: i },\n\t\t\t\t\t\t\t_react2.default.createElement(\n\t\t\t\t\t\t\t\t\"p\",\n\t\t\t\t\t\t\t\t{ className: \"comment-title\" },\n\t\t\t\t\t\t\t\t_react2.default.createElement(\n\t\t\t\t\t\t\t\t\t\"span\",\n\t\t\t\t\t\t\t\t\t{ className: \"comment-label\" },\n\t\t\t\t\t\t\t\t\tcomment.name,\n\t\t\t\t\t\t\t\t\t\":\"\n\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\t_react2.default.createElement(\n\t\t\t\t\t\t\t\t\t\"span\",\n\t\t\t\t\t\t\t\t\t{ className: \"time\" },\n\t\t\t\t\t\t\t\t\tcomment.createTime.toString()\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t_react2.default.createElement(\"article\", { className: \"comment-content\", dangerouslySetInnerHTML: { __html: comment.marked } })\n\t\t\t\t\t\t);\n\t\t\t\t\t})\n\t\t\t\t),\n\t\t\t\t_react2.default.createElement(\n\t\t\t\t\t\"form\",\n\t\t\t\t\t{ className: \"form\" },\n\t\t\t\t\t_react2.default.createElement(\n\t\t\t\t\t\t\"div\",\n\t\t\t\t\t\t{ className: \"form-group\" },\n\t\t\t\t\t\t_react2.default.createElement(\n\t\t\t\t\t\t\t\"label\",\n\t\t\t\t\t\t\t{ className: \"label\" },\n\t\t\t\t\t\t\t\"content*:\"\n\t\t\t\t\t\t),\n\t\t\t\t\t\t_react2.default.createElement(\n\t\t\t\t\t\t\t\"div\",\n\t\t\t\t\t\t\t{ className: \"form-control\" },\n\t\t\t\t\t\t\t_react2.default.createElement(\"textarea\", { className: \"textarea\", name: \"content\", placeholder: \"content\", required: true,\n\t\t\t\t\t\t\t\tvalue: comment.content, onChange: function onChange(e) {\n\t\t\t\t\t\t\t\t\treturn _this3.handleCommentValueChange(\"content\", e.target.value);\n\t\t\t\t\t\t\t\t} })\n\t\t\t\t\t\t)\n\t\t\t\t\t),\n\t\t\t\t\t_react2.default.createElement(\n\t\t\t\t\t\t\"div\",\n\t\t\t\t\t\t{ className: \"form-group\" },\n\t\t\t\t\t\t_react2.default.createElement(\n\t\t\t\t\t\t\t\"label\",\n\t\t\t\t\t\t\t{ className: \"label\" },\n\t\t\t\t\t\t\t\"name*:\"\n\t\t\t\t\t\t),\n\t\t\t\t\t\t_react2.default.createElement(\n\t\t\t\t\t\t\t\"div\",\n\t\t\t\t\t\t\t{ className: \"form-control\" },\n\t\t\t\t\t\t\t_react2.default.createElement(\"input\", { className: \"input\", type: \"text\", name: \"name\", placeholder: \"name\", required: true,\n\t\t\t\t\t\t\t\tvalue: comment.name, onChange: function onChange(e) {\n\t\t\t\t\t\t\t\t\treturn _this3.handleCommentValueChange(\"name\", e.target.value);\n\t\t\t\t\t\t\t\t} })\n\t\t\t\t\t\t)\n\t\t\t\t\t),\n\t\t\t\t\t_react2.default.createElement(\n\t\t\t\t\t\t\"div\",\n\t\t\t\t\t\t{ className: \"form-group\" },\n\t\t\t\t\t\t_react2.default.createElement(\n\t\t\t\t\t\t\t\"label\",\n\t\t\t\t\t\t\t{ className: \"label\" },\n\t\t\t\t\t\t\t\"phone:\"\n\t\t\t\t\t\t),\n\t\t\t\t\t\t_react2.default.createElement(\n\t\t\t\t\t\t\t\"div\",\n\t\t\t\t\t\t\t{ className: \"form-control\" },\n\t\t\t\t\t\t\t_react2.default.createElement(\"input\", { className: \"input\", type: \"text\", name: \"phone\", placeholder: \"phone\",\n\t\t\t\t\t\t\t\tvalue: comment.phone, onChange: function onChange(e) {\n\t\t\t\t\t\t\t\t\treturn _this3.handleCommentValueChange(\"phone\", e.target.value);\n\t\t\t\t\t\t\t\t} })\n\t\t\t\t\t\t)\n\t\t\t\t\t),\n\t\t\t\t\t_react2.default.createElement(\n\t\t\t\t\t\t\"div\",\n\t\t\t\t\t\t{ className: \"form-group\" },\n\t\t\t\t\t\t_react2.default.createElement(\n\t\t\t\t\t\t\t\"label\",\n\t\t\t\t\t\t\t{ className: \"label\" },\n\t\t\t\t\t\t\t\"email:\"\n\t\t\t\t\t\t),\n\t\t\t\t\t\t_react2.default.createElement(\n\t\t\t\t\t\t\t\"div\",\n\t\t\t\t\t\t\t{ className: \"form-control\" },\n\t\t\t\t\t\t\t_react2.default.createElement(\"input\", { className: \"input\", type: \"text\", name: \"email\", placeholder: \"email\",\n\t\t\t\t\t\t\t\tvalue: comment.email, onChange: function onChange(e) {\n\t\t\t\t\t\t\t\t\treturn _this3.handleCommentValueChange(\"email\", e.target.value);\n\t\t\t\t\t\t\t\t} })\n\t\t\t\t\t\t)\n\t\t\t\t\t),\n\t\t\t\t\t_react2.default.createElement(\n\t\t\t\t\t\t\"div\",\n\t\t\t\t\t\t{ className: \"form-group\" },\n\t\t\t\t\t\t_react2.default.createElement(\n\t\t\t\t\t\t\t\"div\",\n\t\t\t\t\t\t\t{ className: \"form-control\" },\n\t\t\t\t\t\t\t_react2.default.createElement(\"input\", { className: \"btn\", type: \"button\", value: \"提交评论\", onClick: function onClick(e) {\n\t\t\t\t\t\t\t\t\treturn _this3.handleSubmit();\n\t\t\t\t\t\t\t\t} }),\n\t\t\t\t\t\t\t_react2.default.createElement(\n\t\t\t\t\t\t\t\t\"span\",\n\t\t\t\t\t\t\t\t{ className: \"form-static\" },\n\t\t\t\t\t\t\t\tcommentMsg\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t)\n\t\t\t\t\t)\n\t\t\t\t)\n\t\t\t);\n\t\t}\n\t}]);\n\n\treturn Blog;\n}(_react2.default.Component);\n\nexports.default = Blog;","import React from \"react\"\nimport ajax from \"client-ajax\"\nimport \"@lib/date\"\n\nexport default class Blog extends React.Component {\n\tstatic getMeta () {\n\t\treturn {\n\t\t\ttitle: \"廖仲武的博客 - Liaozhongwu's Blog\",\n\t\t\tdescription: \"廖仲武的博客 - Liaozhongwu's Blog\",\n\t\t\tcssFile: [ \"/css/theme.css\", \"/css/highlight.css\", \"/page/blog/index.css\" ],\n\t\t\tjsFile: [ \"/page/blog/index.js\" ]\n\t\t}\n\t}\n\tconstructor (props) {\n\t\tsuper();\n\t\tthis.state = {\n\t\t\tblog: props.blog,\n\t\t\tcomments: props.comments,\n\t\t\tcomment: {\n\t\t\t\tname: \"\",\n\t\t\t\tphone: \"\",\n\t\t\t\temail: \"\",\n\t\t\t\tcontent: \"\"\n\t\t\t},\n\t\t\tcommentMsg: \"\"\n\t\t}\n\t}\n\thandleSubmit () {\n\t\tlet {blog, comments, comment} = this.state\n\n\t\tif (!comment.content) {\n\t\t\tthis.setState({\n\t\t\t\tcommentMsg: \"please input your content\"\n\t\t\t});\n\t\t\treturn;\n\t\t}\n\t\tif (!comment.name) {\n\t\t\tthis.setState({\n\t\t\t\tcommentMsg: \"please input your name\"\n\t\t\t});\n\t\t\treturn;\n\t\t}\n\n\t\tajax({\n\t\t\turl: \"/comment/save\", \n\t\t\tmethod: \"post\",\n\t\t\tdata: {\n\t\t\t\tbid: blog._id,\n\t\t\t\tname: comment.name,\n\t\t\t\tphone: comment.phone,\n\t\t\t\temail: comment.email,\n\t\t\t\tcontent: comment.content\n\t\t\t},\n\t\t\tbefore: () => {\n\t\t\t\tthis.setState({\n\t\t\t\t\tcommentMsg: \"submiting...\",\n\t\t\t\t});\n\t\t\t},\n\t\t\tsuccess: (body) => {\n\t\t\t\tcomments.push(body);\n\t\t\t\tthis.setState({\n\t\t\t\t\tcomments: comments,\n\t\t\t\t\tcomment: {\n\t\t\t\t\t\tname: \"\",\n\t\t\t\t\t\tphone: \"\",\n\t\t\t\t\t\temail: \"\",\n\t\t\t\t\t\tcontent: \"\"\n\t\t\t\t\t},\n\t\t\t\t\tcommentMsg: \"submit success\",\n\t\t\t\t});\n\t\t\t},\n\t\t\terror: () => {\n\t\t\t\tthis.setState({\n\t\t\t\t\tcommentMsg: \"submit failure\",\n\t\t\t\t});\n\t\t\t},\n\t\t\tcomplete: () => {\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\tthis.setState({\n\t\t\t\t\t\tcommentMsg: \"\",\n\t\t\t\t\t});\n\t\t\t\t}, 2000);\n\t\t\t}\n\t\t});\t\n\t}\n\thandleCommentValueChange (key, value) {\n\t\tlet {comment} = this.state;\n\t\tcomment[key] = value;\n\t\tthis.setState({\n\t\t\tcomment: comment\n\t\t});\n\t}\n\trender() {\n\t\tlet {blog, comments, comment, commentMsg} = this.state\n\t\treturn (\n\t\t\t<div className=\"content\">\n\t\t\t\t<p className=\"title\">\n\t\t\t\t\t<span className=\"title-content\">{blog.title}</span>\n\t\t\t\t\t<span className=\"time\">{blog.createTime.toString()}</span>\n\t\t\t\t</p>\n\t\t\t\t<article className=\"article\" dangerouslySetInnerHTML={{__html: blog.marked}}/>\n\t\t\t\t<ul className=\"list\">\n\t\t\t\t\t{\n\t\t\t\t\t\tcomments.map( (comment, i) => (\n\t\t\t\t\t\t\t<li className=\"item comment\" key={i}>\n\t\t\t\t\t\t\t\t<p className=\"comment-title\">\n\t\t\t\t\t\t\t\t\t<span className=\"comment-label\">{comment.name}:</span>\n\t\t\t\t\t\t\t\t\t<span className=\"time\">{comment.createTime.toString()}</span>\n\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t<article className=\"comment-content\" dangerouslySetInnerHTML={{__html: comment.marked}} />\n\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t))\n\t\t\t\t\t}\n\t\t\t\t</ul>\n\t\t\t\t<form className=\"form\">\n\t\t\t\t\t<div className=\"form-group\">\n\t\t\t\t\t\t<label className=\"label\">content*:</label>\n\t\t\t\t\t\t<div className=\"form-control\">\n\t\t\t\t\t\t\t<textarea className=\"textarea\" name=\"content\" placeholder=\"content\" required\n\t\t\t\t\t\t\t\tvalue={comment.content} onChange={e => this.handleCommentValueChange(\"content\", e.target.value)}></textarea>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className=\"form-group\">\n\t\t\t\t\t\t<label className=\"label\">name*:</label>\n\t\t\t\t\t\t<div className=\"form-control\">\n\t\t\t\t\t\t\t<input className=\"input\" type=\"text\" name=\"name\" placeholder=\"name\" required\n\t\t\t\t\t\t\t\tvalue={comment.name} onChange={e => this.handleCommentValueChange(\"name\", e.target.value)}/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className=\"form-group\">\n\t\t\t\t\t\t<label className=\"label\">phone:</label>\n\t\t\t\t\t\t<div className=\"form-control\">\n\t\t\t\t\t\t\t<input className=\"input\" type=\"text\" name=\"phone\" placeholder=\"phone\"\n\t\t\t\t\t\t\t\tvalue={comment.phone} onChange={e => this.handleCommentValueChange(\"phone\", e.target.value)}/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className=\"form-group\">\n\t\t\t\t\t\t<label className=\"label\">email:</label>\n\t\t\t\t\t\t<div className=\"form-control\">\n\t\t\t\t\t\t\t<input className=\"input\" type=\"text\" name=\"email\" placeholder=\"email\"\n\t\t\t\t\t\t\t\tvalue={comment.email} onChange={e => this.handleCommentValueChange(\"email\", e.target.value)}/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className=\"form-group\">\n\t\t\t\t\t\t<div className=\"form-control\">\n\t\t\t\t\t\t<input className=\"btn\" type=\"button\" value=\"提交评论\" onClick={e => this.handleSubmit()}/>\n\t\t\t\t\t\t<span className=\"form-static\">{ commentMsg }</span>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t</form>\n\t\t\t</div>\t\t\t\t\n\t\t);\n\t}\n}"],"sourceRoot":"/source/"}